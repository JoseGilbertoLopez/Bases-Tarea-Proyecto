\documentclass{article}

\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[spanish]{babel}
\usepackage{amsmath}
\usepackage{amssymb}

\title{(Tarea 5:) Dependencias y Normalización}
\author{Naranjo Robledo Carlos \\ Lopéz García José Gilberto}

\begin{document}
  \maketitle{Tarea 5}
  \begin{enumerate}
    \item[(1)] Preguntas de repaso.
    \begin{enumerate}
      \item[(a)] ¿Qué es una dependencia funcional y comó se define?
      Se trata de una relación unididreccional entre 2 atributos de tal forma que
      en un momento dado, para cada valor único de $A$, sólo un valor de $B$ se
      asocia con él através de la relación.
      \item[(b)] ¿Para qué sirve el concepto de dependencia en la normalización?
        \begin{enumerate}
          \item Ayudan a especificar formalmente cuando un diseño es correcto.
          \item Especifiar restricciones sobre el conjunto de relaciones.
          \item Examinar las relaciones y determinar si son legales bajo un
          conjunto de dependencias funcionales dado.
        \end{enumerate}
      \item[(c)] Sea $A$ la llave de $R(A,B,C)$. indica todas las dependencias
      funcionales que implica $A$.
      \begin{align*}
        A &\rightarrow A & A &\rightarrow B & A &\rightarrow C
      \end{align*}
      $$ A += \{A,B,C\} $$
      \item[(d)] ¿Qué es una forma normal? ¿Cuál es el objetivo de normalizar un
      modelo de datos?
        \begin{enumerate}
          \item Tecnica desarrollada inicialmente por E.F.Codd en 1972, para diseñar la
          estructura lógica de una BD en el modelo relacional.
          \item Proceso por el cual su va comprobando el cumplimiento de una serie
          de reglas (restricciones) por parte de un esquema de relación.
          \item Cada regla que se cumple, aumenta el grado de normalización del
          esquma.
          \item Cuando una regla no cumple, el esquema de relación se debe
          descomponer en varios esquemas que sí la cumplan por separado.
        \end{enumerate}
      \item[(e)] En qué casos es preferible lograr 3NF en vez de BCNF

      La forma normal de Boyce-Codd requiere que no existan dependencias
      funcionales no triviales de los atributos que no sean un conjunto de la
      clave candidata.
    \end{enumerate}
  \item[(2)] Proporciona algunos ejemplos que demuestren que las siguientes reglas
  no son válidas.
    \begin{enumerate}
      \item[(a)] $A \rightarrow B$, entonces $B \rightarrow A$

      Tenemos que a cada valor de A se le asigna un unico valor de B,
      suponiendo que A es una persona y B el nombre de la persona, sabemos que una
      persona solo puede tener un nombre, pero si elegimos un nombre este puede
      estar asociado a mas de una persona.
      \item[(b)] Si $AB \rightarrow C$, entonces $A \rightarrow C$ y $B \rightarrow C$

      En este caso recordemos que una dependencia funcional a cada atributo se le
      asigna un valor unico, pensando en $A$ commo los días y $B$ como los meses
      podemos decir que estos 2 atributos determinan una fecha, pero $A$ no
      determina funcionalmente a $C$ por que $A$ puede tener varias fechas $C$
      asociadas.

      \item[(C)] Si $A \twoheadrightarrow C$, entonces $A \rightarrow C$

      No necesariamente porque a un atributo en a $A$ se le puede asociar mas de
      un valor de $C$.

    \end{enumerate}
    \item[(3)] Para cada uno de los esuemas que se muestran a continuación:
      \begin{enumerate}
        \item[(a)] $R(A,B,C,D,E)$ con $F=\{ AB \rightarrow CD, E \rightarrow C
        ,D \rightarrow B \}$
        \item[(b)] $R(A,B,C,D,E)$ con $F= \{ AB \rightarrow C, DE \rightarrow C,
        B \rightarrow D \}$
      \end{enumerate}
    \item[(4)] Para cada una de las siguientes relaciones con su respectivo
    conjunto de dependencias funcionales:
      \begin{enumerate}
        \item[(a)] $R(A,B,C,D,E,F)$ con $F = \{B\rightarrow D, B \rightarrow E,
        D \rightarrow F, AB \rightarrow C\}$

        \item[(b)] $ R(A,B,C,D,E)$ con $F = \{A \rightarrow BC, B \rightarrow D,
        CD \rightarrow E, E \rightarrow A\}$

      \end{enumerate}

    Indica todas las violaciones a la $3NF$

    Normaliza de acuerdo a la $3NF$

    \begin{enumerate}
      \item[(a)] $R(A,B,C,D,E,F)$ con $F = \{B \rightarrow D, B \rightarrow E,
      D \rightarrow F, AB \rightarrow C\}$

      $$F=\{B \rightarrow DE, D \rightarrow F, AB \rightarrow C\}$$


      Superfluo Izquierdos:

      Es evidente en este caso que no existe variables superfluos del lado
      izquierdo, solo la dependencia funcional $AB \rightarrow C$  cumple tener
      mas de dos variables del lado izquierdo y B solo llega a D y E entonces no hay forma posible de llegar a C sin A.\\


      Superfluo Derecho:

      $B \rightarrow DE$

      ¿D superfluo?
      $$F'\{B \rightarrow E, D \rightarrow F, AB \rightarrow C\}$$
      $$\{B\}+=\{B,E\}$$
      $\therefore $ D no es superfluo.


      ¿E es superfluo?
      $$F'\{B \rightarrow D, D \rightarrow F, AB \rightarrow C\}$$
      $$\{B\}+=\{B,D,F\}$$
      $\therefore$ E no es superfluo

      F tenia desde el principio el mínimo conjunto de dependencias funcionales.

      \item[(b)] $R(A,B,C,D,E)$ con $F = \{A \rightarrow BC, B \rightarrow D,
      CD \rightarrow E, E \rightarrow A\}$

      Superfluo Izquierdo:
      $$CD \rightarrow E$$
      $\therefore$ C superfluo.
      $$D \rightarrow E$$
      $$\{D\}+=\{D,E,A,B,C\}$$
      $\therefore$ C es superfluo.
      $$F=\{A \rightarrow BC, B\rightarrow D, D\rightarrow E, E \rightarrow A\}$$

      Superfluo Derecho:

      $A\rightarrow BC$

      ¿B superfluo?

      $F'=\{A \rightarrow C, B \rightarrow D, D\rightarrow E, E\rightarrow A\}$

      $\{A\}+=\{A,C\}$

      $\therefore$ B no es superfluo, C superfluo.

      $F'=\{A \rightarrow B, B \rightarrow D, D\rightarrow E, E \rightarrow A\}$

      $\{A\}+=\{A,B,D,E\}$
      $\therefore$ C no es superfluo

      F ya tiene el mínimo conjunto de dependencias funcionales al terminar de
      ver los superfluos izquierdos.
    \end{enumerate}

    \item[(5)] Sea el esquema:

    $R(A,B,C,D,E,F)$ con $F=\{BD \rightarrow E, CD \rightarrow A, E \rightarrow C, B \rightarrow D\}$\\
    ¿Qué puedes decir de $\{A\}+$ y $\{F\}+$?

    Calcula \{B\}+, ¿qué puedes decir de esta cerradura?\\
    Obtén todas las llaves candidatas.\\
    ¿R cumple con BCNF? ¿Cumple con 3NF? (en caso contrario normaliza)\\
    Se ha decidido dividir R en las siguientes relaciones S(A,B,C,D,F) y T(C,E), ¿se puede recuperar la
    información de R?
    $$\{ A\}+=\{ A\}$$
    $$\{ F\}+=\{ F\}$$
    $$\{ B\}+=\{ B,D,E,C,A\}$$
    Llave candidata: B

    3ra Forma Normal

    Superfluo Izquierdo:
    $$BD \rightarrow E$$
    ¿B superfluo?
    $$D\rightarrow E$$
    $$\{ D\}+=\{ D,E,C,A\}$$
    $\therefore$ B no es superfluo
    ¿D superfluo?
    $$B\rightarrow E$$
    $$\{ B\}+=\{ B,D,E,C,A\}$$
    $\therefore$ D es superfluo

    $F=\{B \rightarrow E, CD \rightarrow A, E \rightarrow C, B\rightarrow D\}$\\
    $F=\{B \rightarrow DE, CD \rightarrow A, E \rightarrow C\}$\\

    ¿C superfluo?

    $$D\rightarrow A$$
    $\{ D\}+=\{ D,A\}$
    $\therefore$ C no es superfluo

    ¿D superfluo?

    $C \rightarrow A$
    $$\{ C\}+=\{ C,A\}$$
    $\therefore$ D no es superfluo

    Superfluo Derecho:

    $B \rightarrow DE$

    ¿D superfluo?

    $F'=\{B \rightarrow E, CD \rightarrow A, E\rightarrow C\}$\\
    $$\{ B\}+=\{ B,E,C\}$$
    $\therefore$ D no es superfluo

    ¿E superfluo?

    $F'=\{ B \rightarrow D, CD \rightarrow A, E \rightarrow C\}$\\
    $$\{ B\}+=\{ B,D\}$$
    $\therefore$ E no es superfluo.
    F ya tenia el conjunto de dependencias funcionales al terminar los superfluo izquierdo

    La llave de R es: B

    Dividimos en particiones

    S(B,D,E) $con B \rightarrow DE$

    T(C,D,A) $con CD \rightarrow A$

    U(E,C) $con E \rightarrow C$

    La llave de R esta contenido en S entonces ya esta normalizado

    4ta Forma Normal

    Llave $R: B$

    $B\rightarrow DE$

    Esta dependencia cumpla con la regla de normalizacio

    las demas dependencias son violaciones a la 4ta forma normal

    S(E,C) con $E \rightarrow C$, una llave para S es E normalizado

    T(E,C,D,A) Llave de T = ECD es violacion.

    Sea:

    U(C,D,A) Llave de U = CD y la dependencia es $CD \rightarrow A$ normalizado

    V(C) $C\rightarrow C$ es trivial ya esta normalizado

    \item[(6)] Para cada uno de los esquemas, con su respectivo conjunto de dependencias multivaluadas,
    resuelve los siguientes puntos:
    \begin{enumerate}
      \item[(a)] R(A,B,C,D) con DMV = $ \{ AB \twoheadrightarrow C, B
      \rightarrow D \} $
      \item[(b)] R(A,B,C,D,E) con DMV = $\{ A \twoheadrightarrow B, AB
      \rightarrow C, A \rightarrow D, AB \rightarrow E\}$
    \end{enumerate}
    Encuentra todas las violaciones a la $4NF$

    Normaliza de acuerdo a la $4NF$

    a. Llave para R: AB
    $AB\twoheadrightarrow C$

    $B\rightarrow D \quad violacion$

    S(B,D) con $B \rightarrow D$ Llave B para S normalizado

    T(B,A,C) con $AB\twoheadrightarrow C$\\
    Con $DMV= \{ AB \twoheadrightarrow C\} $ La llave es AB que es la llave de R esta normalizado\\
    \\
    $b. Llave para R: AB$\\
    $DMV= \{A \twoheadrightarrow B, AB\rightarrow CE,  A\rightarrow D \}$

    $AB \rightarrow CE$ Ya esta normalizado
    $A \rightarrow D$ violacion
    S(A,D)$ con A\rightarrow D$ La llave de S es A normalizado

    T(A,C,E,B) con $DMV \{ A \twoheadrightarrow B\}$ La llave es AB.

    U(A,B,C,E) con $Ab \rightarrow CE$ Llave AB que es la llave de R normalizado

    V(A,B) con $A \twoheadrightarrow B$ Trivial Normalizado.
    \item[(7)] Se tiene la siguiente relación:
    \begin{multline*}
      R(idEnfermo,idCirujano,fechaCirugía,nombreEnfermo,direcciónEnfermo, \\
      nombreCirujano,nombreCirugía,medicinaSuministrada,efectosSecundarios)
    \end{multline*}
    Digamos que:
    \begin{align*}
      idEnfermo &:= IDE & idCirujano &:= IDC \\
      nombreEnfermo &:= NE & nombreCirujano &:= NC  \\
      direccionEnfermo &:= DE & medicinaSuministrada &:= M & \\
      fechaCirugía &:= FC & efectosSecundarios &:= E \\
      nombreCirugía &:= NC
    \end{align*}
    \begin{enumerate}
      \item Expresa las siguientes restricciones en forma de dependencias
      funcionales: A un enfermo sólo se le da una medicina suministrada. Sólo
      puede existir un efecto secundario por medicamento.
      \begin{align*}
        IDE &\rightarrow M  & M &\rightarrow E
      \end{align*}
      \item Especifica otras dependencias funcionales o multivaluadas que deban
      satisfacerse en la relación R. Por cada una que definas, deberá aparecer
      un enunciado en español como en el inciso anterior.

        $IDE \rightarrow NE$ Un enfermo sólo tiene un nombre.

        $IDE \rightarrow DE$ Un enfermo sólo tiene una dirección.

        $IDC \rightarrow NC$ Un cirujano sólo tiene un nombre.

        $NC \rightarrow FC$ Una cirugía sólo tiene una fecha.

        $FC \twoheadrightarrow NC$ Una fecha puede tener varias cirugías.

        $E \twoheadrightarrow M$ Un efecto Secundario puede ser provacado por
        varios medicamentos.

      \item Normaliza utilizando el conjunto de dependencias establecido en los
      puntos anteriores.
    \end{enumerate}
  \end{enumerate}

\end{document}
